{"version":3,"sources":["webpack:///./src/pages/adminWeb/views/oss/img/Upload.vue?773a","webpack:///./src/pages/adminWeb/components/views/oss/img/upload/UploadImages.vue?2e7e","webpack:///./src/pages/adminWeb/components/views/oss/img/upload/UploadImages.vue?00a5","webpack:///./src/pages/adminWeb/components/views/oss/img/upload/UploadImages.vue?685e","webpack:///./src/pages/adminWeb/components/views/oss/img/upload/UploadImages.vue","webpack:///./src/pages/adminWeb/views/oss/img/Upload.vue?67e9","webpack:///./src/pages/adminWeb/views/oss/img/Upload.vue?5667","webpack:///./src/pages/adminWeb/views/oss/img/Upload.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticRenderFns","attrs","uploadImgAction","handleSuccess","fileList","handleError","uploadImgData","handlePictureCardPreview","scopedSlots","_u","key","fn","ref","file","url","on","$event","disabled","_e","handleDownload","handleRemove","slot","dialogVisible","dialogImageUrl","$store","state","domainNodeServer","params","JSON","stringify","token","waterMark","from","imei","appKey","response","data","resCode","$message","message","resMsg","type","push","console","log","requestApi","name","originalFileName","method","cloneFileList","cloneDeep","filter","v","uid","commit","$router","replace","event","id","_id","conf","index","idVal","$request","direct","length","newChild","components","component","UploadImages"],"mappings":"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","file":"js/chunk-2d0e68f1.84dd881a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"view\"},[_c('UploadImages')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-upload',{attrs:{\"action\":_vm.uploadImgAction,\"on-success\":_vm.handleSuccess,\"file-list\":_vm.fileList,\"on-error\":_vm.handleError,\"data\":_vm.uploadImgData,\"list-type\":\"picture-card\",\"on-preview\":_vm.handlePictureCardPreview},scopedSlots:_vm._u([{key:\"file\",fn:function(ref){\nvar file = ref.file;\nreturn _c('div',{},[_c('img',{staticClass:\"el-upload-list__item-thumbnail\",attrs:{\"src\":file.url,\"alt\":\"\"}}),_c('span',{staticClass:\"el-upload-list__item-actions\"},[_c('span',{staticClass:\"el-upload-list__item-preview\",on:{\"click\":function($event){return _vm.handlePictureCardPreview(file)}}},[_c('i',{staticClass:\"el-icon-zoom-in\"})]),(!_vm.disabled)?_c('span',{staticClass:\"el-upload-list__item-delete\",on:{\"click\":function($event){return _vm.handleDownload(file,$event)}}},[_c('i',{staticClass:\"el-icon-download\"})]):_vm._e(),(!_vm.disabled)?_c('span',{staticClass:\"el-upload-list__item-delete\",on:{\"click\":function($event){return _vm.handleRemove(file)}}},[_c('i',{staticClass:\"el-icon-delete\"})]):_vm._e()])])}}])},[_c('i',{staticClass:\"el-icon-plus\",attrs:{\"slot\":\"default\"},slot:\"default\"})]),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('img',{attrs:{\"width\":\"100%\",\"src\":_vm.dialogImageUrl,\"alt\":\"\"}})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport _ from 'lodash';\nimport clip from '@/utils/clipboardWeb.ts' // use clipboard directly\nimport { Component, Vue } from 'vue-property-decorator'\n@Component({\n  components: {}\n})\nexport default class ViewComponent extends Vue {\n  /**data */\n  dialogImageUrl = ''\n  dialogVisible = false\n  // uploadImgAction = '//www.daokoudai.com/api/3.0/W/disclosure/uploadImage'\n  uploadImgAction = `${this.$store.state.domainNodeServer}/api/3.0/W/disclosure/uploadImage`\n  uploadImgData = {\n    params: JSON.stringify({\n      token: this.$store.state.token,\n      // token: 'aefe9f051c2f4738a2fa09e13f255156',\n      waterMark: true // 是否需要打水印 （正常企业图片都需要）\n    }),\n    from: \"W\",\n    imei: \"imei\",\n    appKey: \"88888888\"\n  }\n  fileList: object[] = []\n  disabled = false\n\n  /**life hook */\n  created() {\n    // this.requestApi();\n  }\n\n\n  /**method */\n  handleSuccess(response: any, file: any, fileList: any) {\n    const data = response\n    if (data.resCode === '0000') {\n      this.$message({\n        message: data.resMsg,\n        type: 'success'\n      })\n      this.fileList.push(file)\n      console.log('this.fileList ',this.fileList )\n      // 增\n      this.requestApi({\n        data:{\n          name: data.originalFileName,\n          url: data.url\n        },\n        method:'post'\n      })\n    } else {\n      const cloneFileList = _.cloneDeep(this.fileList)\n      this.fileList = cloneFileList.filter((v: any) => {\n        return file.uid !== v.uid\n      })\n\n      this.$message({\n        message: data.resMsg,\n        type: 'error'\n      })\n\n      if(data.resCode === 'E0000002'){\n        this.$store.commit('resetAll')\n        this.$router.replace('/user/login')\n      }\n    }\n  }\n  handleDownload(file: any, event: any) {\n    const data = file.response\n    if(data){\n      clip(data.url, event)\n    }else{\n      clip(file.url, event)  \n    }\n  }\n  handleError(response: any, file: any, fileList: any) {\n    console.log('error response',response)\n  }\n  handleRemove(file: any, fileList: any) {\n    console.log('file',file)\n    this.fileList = this.fileList.filter((v: any) => {\n      console.log(file.uid,v.uid)\n      return file.uid !== v.uid\n    })\n    this.requestApi({\n      id: file._id,\n      method:'delete',\n    })\n  }\n  handlePictureCardPreview(file: any) {\n    this.dialogImageUrl = file.url;\n    this.dialogVisible = true;\n  }\n\n  async requestApi(conf:any={}){\n    const {\n      data={},\n      method='get',\n      index=0,\n    } = conf\n    const id =  data._id || conf.id || '';\n    const idVal = id ? '/' + id : '';\n\n    const response = await this.$request({\n      direct: 'api/ossImg' + idVal,\n      data,\n      method,\n    })\n    // console.log('response:',response)\n      \n    if(method==='post'){ // 增\n      const index = this.fileList.length-1;\n      const newChild:any = this.fileList[index];\n      newChild['_id'] = response._id;\n      this.fileList[index] = newChild;\n    }\n    else if(method=='get'){ // 查\n      this.fileList = response\n    }\n  }\n}\n","import mod from \"-!../../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--17-2!../../../../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadImages.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--17-2!../../../../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadImages.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./UploadImages.vue?vue&type=template&id=1ddc3106&lang=pug&\"\nimport script from \"./UploadImages.vue?vue&type=script&lang=ts&\"\nexport * from \"./UploadImages.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\nimport {UploadImages} from '@/pages/adminWeb/components/views/oss/img/upload'\nimport {Component,Vue} from 'vue-property-decorator'\n@Component({\n  components:{UploadImages,}\n})\nexport default class ViewComponent extends Vue {\n\n}\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js??ref--17-2!../../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Upload.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js??ref--17-2!../../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Upload.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Upload.vue?vue&type=template&id=3ae7198e&lang=pug&\"\nimport script from \"./Upload.vue?vue&type=script&lang=ts&\"\nexport * from \"./Upload.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}