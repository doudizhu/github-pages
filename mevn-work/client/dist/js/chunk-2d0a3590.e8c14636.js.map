{"version":3,"sources":["webpack:///./src/pages/adminWeb/views/oss/Dev.vue?c187","webpack:///./src/pages/adminWeb/components/views/oss/dev/UploadImages.vue?41f6","webpack:///./src/pages/adminWeb/components/views/oss/dev/UploadImages.vue?50f0","webpack:///./src/pages/adminWeb/components/views/oss/dev/UploadImages.vue?2897","webpack:///./src/pages/adminWeb/components/views/oss/dev/UploadImages.vue","webpack:///./src/pages/adminWeb/views/oss/Dev.vue?b4ee","webpack:///./src/pages/adminWeb/views/oss/Dev.vue?ceba","webpack:///./src/pages/adminWeb/views/oss/Dev.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","staticRenderFns","attrs","uploadImgAction","handleSuccess","fileList","handleError","uploadImgData","handlePictureCardPreview","scopedSlots","_u","key","fn","ref","file","url","on","$event","disabled","_e","handleDownload","handleRemove","slot","dialogVisible","dialogImageUrl","$store","state","domainNodeServer","project","requestApi","response","data","$message","message","type","uid","push","event","console","log","filter","v","id","_id","method","name","conf","index","idVal","$request","direct","length","newChild","components","component","UploadImages"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,KAAK,CAACJ,EAAIO,GAAG,UAAUH,EAAG,iBAAiB,IACzKI,EAAkB,G,4DCDlB,EAAS,WAAa,IAAIR,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,YAAY,CAACK,MAAM,CAAC,OAAST,EAAIU,gBAAgB,aAAaV,EAAIW,cAAc,YAAYX,EAAIY,SAAS,WAAWZ,EAAIa,YAAY,KAAOb,EAAIc,cAAc,YAAY,eAAe,aAAad,EAAIe,0BAA0BC,YAAYhB,EAAIiB,GAAG,CAAC,CAACC,IAAI,OAAOC,GAAG,SAASC,GAC5X,IAAIC,EAAOD,EAAIC,KACf,OAAOjB,EAAG,MAAM,GAAG,CAACA,EAAG,MAAM,CAACE,YAAY,iCAAiCG,MAAM,CAAC,IAAMY,EAAKC,IAAI,IAAM,MAAMlB,EAAG,OAAO,CAACE,YAAY,gCAAgC,CAACF,EAAG,OAAO,CAACE,YAAY,+BAA+BiB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOxB,EAAIe,yBAAyBM,MAAS,CAACjB,EAAG,IAAI,CAACE,YAAY,sBAAwBN,EAAIyB,SAAkLzB,EAAI0B,KAA5KtB,EAAG,OAAO,CAACE,YAAY,8BAA8BiB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOxB,EAAI2B,eAAeN,EAAKG,MAAW,CAACpB,EAAG,IAAI,CAACE,YAAY,uBAAkCN,EAAIyB,SAAuKzB,EAAI0B,KAAjKtB,EAAG,OAAO,CAACE,YAAY,8BAA8BiB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOxB,EAAI4B,aAAaP,MAAS,CAACjB,EAAG,IAAI,CAACE,YAAY,8BAAuC,CAACF,EAAG,IAAI,CAACE,YAAY,eAAeG,MAAM,CAAC,KAAO,WAAWoB,KAAK,cAAczB,EAAG,YAAY,CAACK,MAAM,CAAC,QAAUT,EAAI8B,eAAeP,GAAG,CAAC,iBAAiB,SAASC,GAAQxB,EAAI8B,cAAcN,KAAU,CAACpB,EAAG,MAAM,CAACK,MAAM,CAAC,MAAQ,OAAO,IAAMT,EAAI+B,eAAe,IAAM,SAAS,IAC39B,EAAkB,G,4DC8BD,EAArB,6D,+DAEE,EAAAA,eAAiB,GACjB,EAAAD,eAAgB,EAEhB,EAAApB,gBAAA,UAAqB,EAAKsB,OAAOC,MAAMC,iBAAvC,YACA,EAAApB,cAAgB,CACdqB,QAAQ,UAEV,EAAAvB,SAAqB,GACrB,EAAAa,UAAW,EAVb,+EAcIxB,KAAKmC,eAdT,oCAmBgBC,EAAehB,EAAWT,GACtC,IAAM0B,EAAOD,EACbpC,KAAKsC,SAAS,CACZC,QAAS,KACTC,KAAM,YAERH,EAAKI,IAAMrB,EAAKqB,IAChBzC,KAAKW,SAAS+B,KAAKL,KA1BvB,qCA4BiBjB,EAAWuB,GACxB,IAAMN,EAAOjB,EAAKgB,SACfC,EACD,eAAKA,EAAKhB,IAAKsB,GAEf,eAAKvB,EAAKC,IAAKsB,KAjCrB,kCAoCcP,EAAehB,EAAWT,GACpCiC,QAAQC,IAAI,iBAAiBT,KArCjC,mCAuCehB,EAAWT,GACtBiC,QAAQC,IAAI,OAAOzB,GACnBpB,KAAKW,SAAWX,KAAKW,SAASmC,QAAO,SAACC,GAEpC,OADAH,QAAQC,IAAIzB,EAAKqB,IAAIM,EAAEN,KAChBrB,EAAKqB,MAAQM,EAAEN,OAExBzC,KAAKmC,WAAW,CACda,GAAI5B,EAAK6B,IACTC,OAAO,SACPb,KAAK,CACHc,KAAM/B,EAAK+B,UAjDnB,+CAqD2B/B,GACvBpB,KAAK8B,eAAiBV,EAAKC,IAC3BrB,KAAK6B,eAAgB,IAvDzB,4NA0DmBuB,EA1DnB,+BA0D4B,GA1D5B,EA+DQA,EAHFf,YA5DN,MA4DW,GA5DX,IA+DQe,EAFFF,cA7DN,MA6Da,MA7Db,IA+DQE,EADFC,WA9DN,MA8DY,EA9DZ,EAgEUL,EAAMX,EAAKY,KAAOG,EAAKJ,IAAM,GAC7BM,EAAQN,EAAK,IAAMA,EAAK,GAjElC,SAmE2BhD,KAAKuD,SAAS,CACnCC,OAAQ,UAAYF,EACpBjB,OACAa,WAtEN,OAmEUd,EAnEV,OAyEgB,SAATc,GACK,EAAQlD,KAAKW,SAAS8C,OAAO,EAC7BC,EAAe1D,KAAKW,SAAS,GACnC+C,EAAS,OAAStB,EAASa,IAC3BjD,KAAKW,SAAS,GAAS+C,GAET,OAARR,IACNlD,KAAKW,SAAWyB,GAhFtB,8GAA2C,QAAtB,EAAa,gBAHjC,eAAU,CACTuB,WAAY,MAEO,WCjCud,I,YCOxeC,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,EAAAA,E,QCNM,EAArB,kJAA2C,QAAtB,EAAa,gBAHjC,eAAU,CACTD,WAAW,CAACE,mBAEO,WCZ0a,ICO3b,EAAY,eACd,EACA/D,EACAS,GACA,EACA,KACA,KACA,MAIa,e","file":"js/chunk-2d0a3590.e8c14636.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"view\"},[_c('h3',[_vm._v(\"图片资源\")]),_c('UploadImages')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-upload',{attrs:{\"action\":_vm.uploadImgAction,\"on-success\":_vm.handleSuccess,\"file-list\":_vm.fileList,\"on-error\":_vm.handleError,\"data\":_vm.uploadImgData,\"list-type\":\"picture-card\",\"on-preview\":_vm.handlePictureCardPreview},scopedSlots:_vm._u([{key:\"file\",fn:function(ref){\nvar file = ref.file;\nreturn _c('div',{},[_c('img',{staticClass:\"el-upload-list__item-thumbnail\",attrs:{\"src\":file.url,\"alt\":\"\"}}),_c('span',{staticClass:\"el-upload-list__item-actions\"},[_c('span',{staticClass:\"el-upload-list__item-preview\",on:{\"click\":function($event){return _vm.handlePictureCardPreview(file)}}},[_c('i',{staticClass:\"el-icon-zoom-in\"})]),(!_vm.disabled)?_c('span',{staticClass:\"el-upload-list__item-delete\",on:{\"click\":function($event){return _vm.handleDownload(file,$event)}}},[_c('i',{staticClass:\"el-icon-download\"})]):_vm._e(),(!_vm.disabled)?_c('span',{staticClass:\"el-upload-list__item-delete\",on:{\"click\":function($event){return _vm.handleRemove(file)}}},[_c('i',{staticClass:\"el-icon-delete\"})]):_vm._e()])])}}])},[_c('i',{staticClass:\"el-icon-plus\",attrs:{\"slot\":\"default\"},slot:\"default\"})]),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('img',{attrs:{\"width\":\"100%\",\"src\":_vm.dialogImageUrl,\"alt\":\"\"}})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport _ from 'lodash';\nimport clip from '@/utils/clipboardWeb.ts' // use clipboard directly\nimport { Component, Vue } from 'vue-property-decorator'\n@Component({\n  components: {}\n})\nexport default class ViewComponent extends Vue {\n  /**data */\n  dialogImageUrl = ''\n  dialogVisible = false\n  // uploadImgAction = '//www.daokoudai.com/api/3.0/W/disclosure/uploadImage'\n  uploadImgAction = `${this.$store.state.domainNodeServer}/api/oss`\n  uploadImgData = {\n    project:'common',\n  }\n  fileList: object[] = []\n  disabled = false\n\n  /**life hook */\n  created() {\n    this.requestApi();\n  }\n\n\n  /**method */\n  handleSuccess(response: any, file: any, fileList: any) {\n    const data = response\n    this.$message({\n      message: '成功',\n      type: 'success'\n    })\n    data.uid = file.uid;\n    this.fileList.push(data)\n  }\n  handleDownload(file: any, event: any) {\n    const data = file.response\n    if(data){\n      clip(data.url, event)\n    }else{\n      clip(file.url, event)  \n    }\n  }\n  handleError(response: any, file: any, fileList: any) {\n    console.log('error response',response)\n  }\n  handleRemove(file: any, fileList: any) {\n    console.log('file',file)\n    this.fileList = this.fileList.filter((v: any) => {\n      console.log(file.uid,v.uid)\n      return file.uid !== v.uid\n    })\n    this.requestApi({\n      id: file._id,\n      method:'delete',\n      data:{\n        name: file.name\n      }\n    })\n  }\n  handlePictureCardPreview(file: any) {\n    this.dialogImageUrl = file.url;\n    this.dialogVisible = true;\n  }\n\n  async requestApi(conf:any={}){\n    const {\n      data={},\n      method='get',\n      index=0,\n    } = conf\n    const id =  data._id || conf.id || '';\n    const idVal = id ? '/' + id : '';\n\n    const response = await this.$request({\n      direct: 'api/oss' + idVal,\n      data,\n      method,\n    })\n      \n    if(method==='post'){ // 增\n      const index = this.fileList.length-1;\n      const newChild:any = this.fileList[index];\n      newChild['_id'] = response._id;\n      this.fileList[index] = newChild;\n    }\n    else if(method=='get'){ // 查\n      this.fileList = response\n    }\n  }\n}\n","import mod from \"-!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../../node_modules/babel-loader/lib/index.js??ref--17-2!../../../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadImages.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../../node_modules/babel-loader/lib/index.js??ref--17-2!../../../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadImages.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./UploadImages.vue?vue&type=template&id=6a367bcf&lang=pug&\"\nimport script from \"./UploadImages.vue?vue&type=script&lang=ts&\"\nexport * from \"./UploadImages.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\nimport {UploadImages} from '@/pages/adminWeb/components/views/oss/dev/index.ts'\nimport {Component,Vue} from 'vue-property-decorator'\n@Component({\n  components:{UploadImages,}\n})\nexport default class ViewComponent extends Vue {\n\n}\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??ref--17-2!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dev.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??ref--17-2!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dev.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Dev.vue?vue&type=template&id=713812c3&lang=pug&\"\nimport script from \"./Dev.vue?vue&type=script&lang=ts&\"\nexport * from \"./Dev.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}