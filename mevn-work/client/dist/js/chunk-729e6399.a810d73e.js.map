{"version":3,"sources":["webpack:///./src/views/project/Order.vue?b37b","webpack:///./src/views/project/Order.vue?f2b4","webpack:///./src/views/project/Order.vue?6166","webpack:///./src/views/project/Order.vue","webpack:///./src/utils/index.ts"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","model","schema","on","submitHandler","staticRenderFns","_Vue","ViewComponent","_this","apply","arguments","userInfo","orderInfo","selectedLabel","amount","fields","type","modelKey","label","props","placeholer","clearable","rules","required","trigger","messages","key","value","getInvestUserInfo","getInvestOrder","_submitHandler","regeneratorRuntime","mark","_callee","e","data","wrap","_context","prev","next","preventDefault","abrupt","applyedCA","$request","api","token","$store","state","params","projectNo","$route","id","originReturnUrl","originNodeServer","rewardAmt","couponIds","acceptedAgreement","transferRiskRemind","bondInvestAgreement","returnUrl","concat","method","sent","resCode","formSubmitData","url","shUrl","$router","push","stop","_x","_getInvestUserInfo","_callee2","_context2","_getInvestOrder","_callee3","_context3","components","component","debounce","fn","delay","timer","args","context","clearTimeout","setTimeout","isEmpty","undefined","Object","keys","length","trim","getArrayObjIndexByKey","array","keyObj","newIndex","val","some","item","index"],"mappings":"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","file":"js/chunk-729e6399.a810d73e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"view\"},[_c('cube-form',{attrs:{\"model\":_vm.model,\"schema\":_vm.schema},on:{\"submit\":_vm.submitHandler}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/lipeng/Music/20190911/mevn/mevn-work/client/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/lipeng/Music/20190911/mevn/mevn-work/client/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/lipeng/Music/20190911/mevn/mevn-work/client/node_modules/@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/lipeng/Music/20190911/mevn/mevn-work/client/node_modules/@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/lipeng/Music/20190911/mevn/mevn-work/client/node_modules/@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/lipeng/Music/20190911/mevn/mevn-work/client/node_modules/@babel/runtime-corejs2/helpers/esm/inherits\";\nimport { __decorate } from \"tslib\";\nimport { isEmpty } from '@/utils';\nimport { Component, Vue } from 'vue-property-decorator';\n\nvar ViewComponent =\n/*#__PURE__*/\nfunction (_Vue) {\n  _inherits(ViewComponent, _Vue);\n\n  function ViewComponent() {\n    var _this;\n\n    _classCallCheck(this, ViewComponent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ViewComponent).apply(this, arguments));\n    /**data */\n\n    _this.userInfo = {};\n    _this.orderInfo = {};\n    _this.selectedLabel = ''; // 充值页，结果页\n\n    _this.model = {\n      amount: ''\n    };\n    _this.schema = {\n      fields: [{\n        type: \"input\",\n        modelKey: \"amount\",\n        label: \"￥\",\n        props: {\n          placeholer: \"输入金额\",\n          clearable: true\n        },\n        rules: {\n          required: true\n        },\n        trigger: \"blur\",\n        messages: {\n          required: \"不能为空\"\n        }\n      }, {\n        type: \"submit\",\n        label: \"确认\"\n      }]\n    };\n    return _this;\n  }\n  /**life hook */\n\n\n  _createClass(ViewComponent, [{\n    key: \"created\",\n    value: function created() {\n      this.getInvestUserInfo();\n      this.getInvestOrder();\n    }\n    /**method */\n\n  }, {\n    key: \"submitHandler\",\n    value: function () {\n      var _submitHandler = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(e) {\n        var data;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n\n                if (!(isEmpty(this.userInfo) || isEmpty(this.orderInfo))) {\n                  _context.next = 3;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 3:\n                // 1.申请CA \n                if (!this.userInfo.applyedCA) {\n                  this.$request({\n                    api: 'applyCA',\n                    token: this.$store.state.token\n                  });\n                } // 2.中间页跳转申请\n\n\n                _context.next = 6;\n                return this.$request({\n                  api: 'investConfirm',\n                  params: {\n                    amount: this.model.amount,\n                    projectNo: this.$route.params.id,\n                    originReturnUrl: this.$store.state.originNodeServer,\n                    token: this.$store.state.token,\n                    rewardAmt: 0,\n                    couponIds: '',\n                    acceptedAgreement: true,\n                    transferRiskRemind: true,\n                    bondInvestAgreement: true,\n                    returnUrl: \"\".concat(this.$store.state.originNodeServer, \"/project/investReturn\")\n                  },\n                  method: 'post'\n                });\n\n              case 6:\n                data = _context.sent;\n\n                if (data.resCode === '0000') {\n                  this.$request({\n                    formSubmitData: {\n                      url: data.shUrl,\n                      params: data.params,\n                      returnUrl: data.returnUrl\n                    }\n                  });\n                } else {\n                  if (data.resCode !== 'E1070044') {\n                    this.$router.push('/project/investReturn?result=false');\n                  }\n                }\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function submitHandler(_x) {\n        return _submitHandler.apply(this, arguments);\n      }\n\n      return submitHandler;\n    }()\n  }, {\n    key: \"getInvestUserInfo\",\n    value: function () {\n      var _getInvestUserInfo = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var data;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.$request({\n                  api: 'getInvestUserInfo',\n                  params: {\n                    projectNo: this.$route.params.id,\n                    token: this.$store.state.token\n                  }\n                });\n\n              case 2:\n                data = _context2.sent;\n\n                if (data.resCode === '0000') {\n                  this.userInfo = data;\n                }\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getInvestUserInfo() {\n        return _getInvestUserInfo.apply(this, arguments);\n      }\n\n      return getInvestUserInfo;\n    }()\n  }, {\n    key: \"getInvestOrder\",\n    value: function () {\n      var _getInvestOrder = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3() {\n        var data;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.$request({\n                  api: 'getInvestOrder',\n                  params: {\n                    projectNo: this.$route.params.id,\n                    token: this.$store.state.token\n                  }\n                });\n\n              case 2:\n                data = _context3.sent;\n\n                if (data.resCode === '0000') {\n                  this.orderInfo = data;\n                }\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function getInvestOrder() {\n        return _getInvestOrder.apply(this, arguments);\n      }\n\n      return getInvestOrder;\n    }()\n  }]);\n\n  return ViewComponent;\n}(Vue);\n\nViewComponent = __decorate([Component({\n  components: {}\n})], ViewComponent);\nexport default ViewComponent;","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--17-2!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--17-2!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Order.vue?vue&type=template&id=a974281a&lang=pug&\"\nimport script from \"./Order.vue?vue&type=script&lang=ts&\"\nexport * from \"./Order.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/**\n * 去抖\n * *待优化：为可传参形式\n * @param {*} fn // 回调方法\n * @param {*} delay // 延迟执行时间\n */\nexport function debounce (fn:any, delay=400) {\n  let timer:any = null;\n\n  return function(this:any) {\n    let args = arguments; // 回调方法参数\n    let context = this; // 自身上下文\n\n    if (timer) { // 每次触发后清除时间函数值\n      clearTimeout(timer);\n    }\n    \n    timer = setTimeout(function () {\n      fn.apply(context, args);\n    }, delay);\n  }\n}\n\n/**\n * 校验为空，忽略数据格式\n * @param value \n */\nexport function isEmpty (value:any){\n  return (\n    value === undefined\n    || null\n    || (typeof value === 'object' && Object.keys(value).length === 0)\n    || (typeof value === 'string' && value.trim().length === 0)\n  )\n}\n\n/**\n * 获取数组对象索引（对个单个属性匹配）\n */\nexport function getArrayObjIndexByKey(array:any,keyObj:any){\n  let newIndex = -1\n\n  const key = Object.keys(keyObj)[0]\n  const val = keyObj[key]\n  array.some((item:any,index:number)=>{\n    if(item[key] == val){\n      newIndex = index;\n      return true;\n    }\n  })\n  return newIndex\n}"],"sourceRoot":""}