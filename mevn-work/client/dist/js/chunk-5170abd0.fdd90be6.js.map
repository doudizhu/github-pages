{"version":3,"sources":["webpack:///./src/pages/msfWap/views/project/Order.vue?74cb","webpack:///./src/pages/msfWap/views/project/Order.vue?5b0a","webpack:///./src/pages/msfWap/views/project/Order.vue?4530","webpack:///./src/pages/msfWap/views/project/Order.vue","webpack:///./src/pages/msfWap/views/project/Order.vue?43c8"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","orderInfo","project","projectNo","ratePerYear","dueTime","month","day","staticStyle","balance","attrs","model","options","on","submitHandler","userInfo","availableAmt","fields","scopedSlots","_u","key","fn","proxy","value","callback","$$v","$set","expression","staticRenderFns","selectedLabel","amount","checked","type","modelKey","props","placeholer","clearable","rules","required","trigger","messages","scrollToInvalidField","layout","getInvestUserInfo","getInvestOrder","window","scrollTo","e","preventDefault","$createToast","time","txt","show","applyedCA","$request","api","token","$store","state","params","$route","id","originReturnUrl","rewardAmt","couponIds","acceptedAgreement","transferRiskRemind","bondInvestAgreement","returnUrl","originNodeServer","method","data","resCode","formSubmitData","url","shUrl","$router","push","components","component"],"mappings":"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","file":"js/chunk-5170abd0.fdd90be6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"view\"},[_c('div',{staticClass:\"project-info\"},[_c('p',[_vm._v(\"郑 明 \"+_vm._s(_vm.orderInfo.project.projectNo))]),_c('div',{staticClass:\"info\"},[_c('div',[_c('p',[_c('b',[_vm._v(_vm._s(_vm.orderInfo.project.ratePerYear))]),_c('span',[_vm._v(\"%/年\")])]),_c('label',[_vm._v(\"回报\")])]),_c('div',[(_vm.orderInfo.project.dueTime.month)?_c('p',[_c('b',[_vm._v(_vm._s(_vm.orderInfo.project.dueTime.month))]),_c('span',[_vm._v(\"个月\")])]):_c('p',[_c('b',[_vm._v(_vm._s(_vm.orderInfo.project.dueTime.day))]),_c('span',[_vm._v(\"天\")])]),_c('label',[_vm._v(\"项目期限\")])]),_c('div',[_c('p',{staticStyle:{\"position\":\"relative\"}},[_c('b',[_vm._v(_vm._s(_vm.orderInfo.project.balance))]),_c('span',[_vm._v(\" 元\")])]),_c('label',[_vm._v(\"剩余额度\")])])])]),_c('cube-form',{attrs:{\"model\":_vm.model,\"options\":_vm.options},on:{\"submit\":_vm.submitHandler}},[_c('div',{staticClass:\"container-cube-form-item\",staticStyle:{\"font-size\":\"12px\"}},[_vm._v(\"账户 可用余额（元）：\"+_vm._s(_vm.userInfo.availableAmt))]),_c('cube-form-item',{attrs:{\"field\":_vm.fields[0]}},[_c('cube-input',{staticStyle:{\"font-size\":\"16px\"},attrs:{\"placeholder\":\"请输入出借金额，100元起投，100元递增\"},scopedSlots:_vm._u([{key:\"prepend\",fn:function(){return [_c('span',{staticClass:\"amount-prepend\"},[_vm._v(\"￥\")])]},proxy:true}]),model:{value:(_vm.model.amount),callback:function ($$v) {_vm.$set(_vm.model, \"amount\", $$v)},expression:\"model.amount\"}})],1),_c('cube-form-item',{staticClass:\"container-cube-form-item\",attrs:{\"field\":_vm.fields[1]}},[_c('cube-checkbox',{staticClass:\"with-click\",model:{value:(_vm.model.checked),callback:function ($$v) {_vm.$set(_vm.model, \"checked\", $$v)},expression:\"model.checked\"}},[_vm._v(\"我已阅读并知悉\"),_c('a',{attrs:{\"href\":\"https://wap.daokoudai.com/help/riskTip\"}},[_vm._v(\"《网络借贷风险提示》\")]),_vm._v(\"和\"),_c('a',{attrs:{\"href\":\"https://wap.daokoudai.com/help/forbidAction\"}},[_vm._v(\"《网络借贷平台禁止性行为》\")])])],1),(_vm.orderInfo.project.balance === 0)?_c('cube-button',{attrs:{\"disabled\":true}},[_vm._v(\"已投满\")]):_c('cube-button',{attrs:{\"type\":\"submit\"}},[_vm._v(\"确认\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { getUrlParam } from '@/utils/common.ts'\nimport { isEmpty } from '@/utils'\nimport { Component, Vue } from 'vue-property-decorator';\n@Component({\n  components: {},\n})\nexport default class ViewComponent extends Vue {\n  /**data */\n  userInfo: any = {}\n  orderInfo: any = {\n    project:{\n      dueTime:{}\n    }\n  }\n  selectedLabel = '' // 充值页，结果页\n  model = {\n    amount: '',\n    checked: '',\n  }\n  fields = [\n    {\n      type: \"input\",\n      modelKey: \"amount\",\n      // label: \"￥\",\n      props: {\n        placeholer: \"输入金额\",\n        clearable: true,\n      },\n      rules: {\n        required: true,\n      },\n      trigger: \"blur\",// *待优化：这样会触发多次异步请求校验。思路一：仅当提交表单时才发起一次异步校验\n      messages: {\n        required: \"不能为空\",\n      },\n    },\n    {\n      type: 'checkbox',\n      modelKey: 'checked',\n      rules: {\n        required: true\n      },\n      messages: {\n        required: '请同意'\n      }\n    },\n  ]\n\n  options = {\n    scrollToInvalidField: true,\n    layout: 'fresh' // standard classic\n  }\n\n  /**life hook */\n  created() {\n    this.getInvestUserInfo();\n    this.getInvestOrder();\n    if (getUrlParam('amount')) {\n      this.model.amount = getUrlParam('amount')\n    }\n  }\n  mounted(){\n    window.scrollTo(0, 0) // 兼容微信输入框，虚拟键盘消失后不回弹问题\n  }\n\n  /**method */\n  async submitHandler(e: any) {\n    e.preventDefault();\n    if (isEmpty(this.userInfo) || isEmpty(this.orderInfo)) return;\n    if(+this.model.amount > +this.orderInfo.project.balance){\n      this.$createToast({\n        type: 'warn',\n        time: 2000,\n        txt: '超过项目剩余额度'\n      }).show();\n      return;\n    }else if(+this.model.amount > +this.userInfo.availableAmt){\n      this.$createToast({\n        type: 'warn',\n        time: 2000,\n        txt: '超过账户可用余额'\n      }).show();\n      return;\n    }\n\n    // 1.申请CA \n    if (!this.userInfo.applyedCA) {\n      this.$request({\n        api: 'applyCA',\n        token: this.$store.state.token,\n      })\n    }\n\n    // 2.中间页跳转申请\n    const data = await this.$request({\n      api: 'investConfirm', // 2.充值确认  --懒猫充值相关\n      params: {\n        amount: this.model.amount,\n        projectNo: this.$route.params.id,\n        originReturnUrl: this.$store.state.originReturnUrl,\n\n        token: this.$store.state.token,\n        rewardAmt: 0,\n        couponIds: '',\n        acceptedAgreement: true,\n        transferRiskRemind: true,\n        bondInvestAgreement: true,\n        returnUrl: `${this.$store.state.originNodeServer}/project/investReturn`,\n      },\n      method: 'post',\n    })\n\n    if (data.resCode === '0000') {\n      this.$request({\n        formSubmitData: {\n          url: data.shUrl,\n          params: data.params,\n          returnUrl: data.returnUrl,\n        }\n      })\n    }\n    else {\n      if (data.resCode !== 'E1070044') {\n        this.$router.push('/project/investReturn?result=false')\n      }\n    }\n  }\n\n  async getInvestUserInfo() {\n    const data = await this.$request({\n      api: 'getInvestUserInfo', // 出借订单页获取用户信息\n      params: {\n        projectNo: this.$route.params.id,\n        token: this.$store.state.token,\n      },\n    })\n\n    if (data.resCode === '0000') {\n      this.userInfo = data\n    }\n  }\n  async getInvestOrder() {\n    const data = await this.$request({\n      api: 'getInvestOrder', // 项目出借订单页\n      params: {\n        projectNo: this.$route.params.id,\n        token: this.$store.state.token,\n      },\n    })\n\n    if (data.resCode === '0000') {\n      this.orderInfo = data\n    }\n  }\n}\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??ref--17-2!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??ref--17-2!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Order.vue?vue&type=template&id=7f5c4962&scoped=true&lang=pug&\"\nimport script from \"./Order.vue?vue&type=script&lang=ts&\"\nexport * from \"./Order.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Order.vue?vue&type=style&index=0&id=7f5c4962&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7f5c4962\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=style&index=0&id=7f5c4962&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=style&index=0&id=7f5c4962&lang=stylus&scoped=true&\""],"sourceRoot":""}