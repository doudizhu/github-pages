(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c8a08"],{"564e":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"view"},[i("h3",[e._v("图片")]),i("UploadImages")],1)},s=[],l=i("d225"),o=i("308d"),n=i("6bb5"),r=i("4e2b"),c=i("9ab4"),u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-upload",{attrs:{action:e.uploadImgAction,"on-success":e.handleSuccess,"file-list":e.fileList,"on-error":e.handleError,data:e.uploadImgData,"list-type":"picture-card","on-preview":e.handlePictureCardPreview},scopedSlots:e._u([{key:"file",fn:function(t){var a=t.file;return i("div",{},[i("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:a.url,alt:""}}),i("span",{staticClass:"el-upload-list__item-actions"},[i("span",{staticClass:"el-upload-list__item-preview",on:{click:function(t){return e.handlePictureCardPreview(a)}}},[i("i",{staticClass:"el-icon-zoom-in"})]),e.disabled?e._e():i("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.handleDownload(a,t)}}},[i("i",{staticClass:"el-icon-download"})]),e.disabled?e._e():i("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.handleRemove(a)}}},[i("i",{staticClass:"el-icon-delete"})])])])}}])},[i("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),i("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},d=[],p=(i("96cf"),i("3b8d")),f=(i("a481"),i("b0b4")),g=i("2ef0"),h=i.n(g),m=i("4ead"),b=i("60a3"),v=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(o["a"])(this,Object(n["a"])(t).apply(this,arguments)),e.dialogImageUrl="",e.dialogVisible=!1,e.uploadImgAction="".concat(e.$store.state.domainNodeServer,"/api/3.0/W/disclosure/uploadImage"),e.uploadImgData={params:JSON.stringify({token:e.$store.state.token,waterMark:!0}),from:"W",imei:"imei",appKey:"88888888"},e.fileList=[],e.disabled=!1,e}return Object(r["a"])(t,e),Object(f["a"])(t,[{key:"created",value:function(){this.requestApi()}},{key:"handleSuccess",value:function(e,t,i){var a=e;if("0000"===a.resCode)this.$message({message:a.resMsg,type:"success"}),this.fileList.push(t),console.log("this.fileList ",this.fileList),this.requestApi({data:{name:a.originalFileName,url:a.url},method:"post"});else{var s=h.a.cloneDeep(this.fileList);this.fileList=s.filter((function(e){return t.uid!==e.uid})),this.$message({message:a.resMsg,type:"error"}),"E0000002"===a.resCode&&(this.$store.commit("resetAll"),this.$router.replace("/user/login"))}}},{key:"handleDownload",value:function(e,t){var i=e.response;i?Object(m["a"])(i.url,t):Object(m["a"])(e.url,t)}},{key:"handleError",value:function(e,t,i){console.log("error response",e)}},{key:"handleRemove",value:function(e,t){console.log("file",e),this.fileList=this.fileList.filter((function(t){return console.log(e.uid,t.uid),e.uid!==t.uid})),this.requestApi({id:e._id,method:"delete"})}},{key:"handlePictureCardPreview",value:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0}},{key:"requestApi",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,i,a,s,l,o,n,r,c,u,d,p=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},i=t.data,a=void 0===i?{}:i,s=t.method,l=void 0===s?"get":s,o=t.index,void 0===o?0:o,n=a._id||t.id||"",r=n?"/"+n:"",e.next=6,this.$request({direct:"api/img"+r,data:a,method:l});case 6:c=e.sent,"post"===l?(u=this.fileList.length-1,d=this.fileList[u],d["_id"]=c._id,this.fileList[u]=d):"get"==l&&(this.fileList=c);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),t}(b["d"]);v=Object(c["a"])([Object(b["a"])({components:{}})],v);var j=v,y=j,w=i("2877"),O=Object(w["a"])(y,u,d,!1,null,null,null),k=O.exports,_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-upload",{attrs:{action:e.uploadImgAction,"on-success":e.handleSuccess,"file-list":e.fileList,"on-error":e.handleError,data:e.uploadImgData,"list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove}},[i("i",{staticClass:"el-icon-plus"})]),i("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},C=[],L=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(o["a"])(this,Object(n["a"])(t).apply(this,arguments)),e.dialogImageUrl="",e.dialogVisible=!1,e.uploadImgAction="//localhost:5000/api/3.0/W/disclosure/uploadImage",e.uploadImgData={params:JSON.stringify({token:"aefe9f051c2f4738a2fa09e13f255156",waterMark:!0}),from:"W",imei:"imei",appKey:"88888888"},e.fileList=[],e}return Object(r["a"])(t,e),Object(f["a"])(t,[{key:"created",value:function(){this.fileList=[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}]}},{key:"handleSuccess",value:function(e,t,i){console.log("response",e),console.log("file",t),console.log("fileList",i);var a=e;"0000"===a.resCode?this.$message({message:a.resMsg,type:"success"}):this.$message({message:a.resMsg,type:"error"})}},{key:"handleDownload",value:function(e,t,i){console.log("response",e),console.log("file",t),console.log("fileList",i)}},{key:"handleError",value:function(e,t,i){console.log("response",e),console.log("file",t),console.log("fileList",i)}},{key:"handleRemove",value:function(e,t){console.log(e,t)}},{key:"handlePictureCardPreview",value:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0}}]),t}(b["d"]);L=Object(c["a"])([Object(b["a"])({components:{}})],L);var I=L,$=I,P=Object(w["a"])($,_,C,!1,null,null,null),A=(P.exports,function(e){function t(){return Object(l["a"])(this,t),Object(o["a"])(this,Object(n["a"])(t).apply(this,arguments))}return Object(r["a"])(t,e),t}(b["d"]));A=Object(c["a"])([Object(b["a"])({components:{UploadImages:k}})],A);var x=A,D=x,E=Object(w["a"])(D,a,s,!1,null,null,null);t["default"]=E.exports}}]);
//# sourceMappingURL=chunk-2d0c8a08.836a84d0.js.map